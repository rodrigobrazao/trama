<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>trama — Jornadas de Design · Apresentação</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;600;700&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { width: 100%; height: 100%; overflow: hidden; background: #070709; }
body { font-family: 'Roboto Mono', monospace; color: #f0ece6; }

#slideshow {
  width: 100vw; height: 100vh;
  position: relative; overflow: hidden;
  background: #070709;
}

/* ─── Animated canvas for intro/outro ─── */
#weaveCanvas {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 0;
}

/* ─── Slide container ─── */
.slide {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  opacity: 0; transition: none;
  z-index: 1; pointer-events: none;
}
.slide.active { opacity: 1; pointer-events: auto; }

/* ─── Image slides ─── */
.slide:not(.slide-logo) {
  background: #070709;
}
.slide img {
  max-width: 100%; max-height: 100%; object-fit: contain;
  display: block;
}

/* ─── Logo/Intro slides ─── */
.slide-logo {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  z-index: 2; background: transparent !important;
}
.slide-logo .pre-text {
  font-size: 11px; color: #ff3c00; letter-spacing: 0.3em;
  text-transform: uppercase; margin-bottom: 24px;
  opacity: 0; animation: fadeInUp 1s ease-out forwards;
  animation-delay: 0.3s;
}
.slide-logo .logo-text {
  font-size: min(12vw, 120px); font-weight: 700;
  letter-spacing: -0.03em; line-height: 0.85;
  color: #f0ece6; opacity: 0;
  animation: fadeInUp 1s ease-out forwards;
  animation-delay: 0.6s;
}
.slide-logo .sub-text {
  display: flex; align-items: center; gap: 14px; margin-top: 20px;
  opacity: 0; animation: fadeInUp 1s ease-out forwards;
  animation-delay: 0.9s;
}
.slide-logo .sub-text .line { height: 1px; width: 36px; background: #ff3c00; }
.slide-logo .sub-text span {
  font-size: 11px; letter-spacing: 0.2em; text-transform: uppercase;
  color: #f0ece6;
}
.slide-logo .info-text {
  margin-top: 32px; font-size: 11px; letter-spacing: 0.15em;
  color: #00e5ff; opacity: 0;
  animation: fadeInUp 1s ease-out forwards;
  animation-delay: 1.2s;
}
.slide-logo .threads-bar {
  display: flex; gap: 6px; margin-top: 24px;
  opacity: 0; animation: fadeInUp 1s ease-out forwards;
  animation-delay: 1.5s;
}
.slide-logo .threads-bar div {
  width: 32px; height: 3px; border-radius: 1px;
}
.slide-logo .credit {
  font-size: 8px; color: rgba(255,255,255,0.2);
  letter-spacing: 0.1em; margin-top: 40px;
  opacity: 0; animation: fadeIn 1s ease-out forwards;
  animation-delay: 1.8s;
}
.slide-logo::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: radial-gradient(ellipse at center, rgba(7,7,9,0.55) 0%, rgba(7,7,9,0.15) 55%, rgba(7,7,9,0.7) 100%);
  z-index: -1; pointer-events: none;
}

/* ─── Progress bar ─── */
#progress-bar {
  position: fixed; bottom: 0; left: 0; width: 100%; height: 3px;
  background: rgba(255,255,255,0.05); z-index: 100;
}
#progress-fill {
  height: 100%; width: 0; background: #ff3c00;
  transition: width 0.4s ease;
}

/* ─── Slide counter (hidden, moved to controls bar) ─── */
#slide-counter { display: none; }

/* ─── Controls hint (hidden, moved to controls bar) ─── */
#controls-hint { display: none; }

/* ─── Navigation arrows ─── */
.nav-arrow {
  position: fixed; top: 50%; z-index: 200;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.12);
  color: rgba(255,255,255,0.6);
  width: 36px; height: 56px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 16px;
  font-family: 'Roboto Mono', monospace;
  transition: background 0.2s, color 0.2s, opacity 0.2s;
  opacity: 1;
  backdrop-filter: blur(6px);
  border-radius: 3px;
}
.nav-arrow:hover {
  background: rgba(255,60,0,0.5);
  color: #fff;
  border-color: rgba(255,60,0,0.5);
}
.nav-arrow.disabled {
  opacity: 0.15 !important;
  pointer-events: none;
}
.nav-arrow-left { left: 10px; }
.nav-arrow-right { right: 10px; }

/* ─── Controls bar ─── */
#controls-bar {
  position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
  z-index: 200; display: flex; align-items: center; gap: 6px;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 4px;
  padding: 5px 10px;
  font-family: 'Roboto Mono', monospace;
}
#controls-bar button {
  background: none; border: 1px solid rgba(255,255,255,0.1);
  color: rgba(255,255,255,0.6);
  font-family: 'Roboto Mono', monospace;
  font-size: 9px; letter-spacing: 0.08em; text-transform: uppercase;
  padding: 4px 10px; cursor: pointer;
  border-radius: 2px;
  transition: background 0.2s, color 0.2s, border-color 0.2s;
  display: flex; align-items: center; gap: 4px;
  white-space: nowrap;
}
#controls-bar button:hover {
  background: rgba(255,60,0,0.4);
  color: #fff;
  border-color: rgba(255,60,0,0.5);
}
#controls-bar button.active {
  background: rgba(255,60,0,0.25);
  color: #ff3c00;
  border-color: rgba(255,60,0,0.4);
}
#controls-bar .separator {
  width: 1px; height: 16px; background: rgba(255,255,255,0.1);
  margin: 0 2px;
}
#controls-bar .counter {
  font-size: 9px; color: rgba(255,255,255,0.35);
  letter-spacing: 0.1em; padding: 0 4px;
  min-width: 52px; text-align: center;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
</style>
</head>
<body>

<div id="slideshow">
  <canvas id="weaveCanvas"></canvas>

  <!-- SLIDE 0: INTRO with animated threads -->
  <div class="slide slide-logo active" id="slide-0">
    <div class="pre-text">iade · 1ª edição · 2026</div>
    <div class="logo-text">trama</div>
    <div class="sub-text">
      <div class="line"></div>
      <span>jornadas de design</span>
    </div>
    <div class="info-text">15 maio 2026 · online · entrada livre</div>
    <div class="threads-bar">
      <div style="background:#ff3c00"></div>
      <div style="background:#00e5ff"></div>
      <div style="background:#c8ff00"></div>
      <div style="background:#ff00aa"></div>
      <div style="background:#ff8800"></div>
      <div style="background:#7b61ff"></div>
    </div>
    <div class="credit">sistema de identidade visual · v02 · rodrigobrazao.pt</div>
  </div>

  <!-- SLIDES 1-29: Screenshots (injected by JS) -->

  <!-- SLIDE 30: OUTRO with animated threads -->
  <div class="slide slide-logo" id="slide-outro">
    <div class="pre-text">iade · 1ª edição · 2026</div>
    <div class="logo-text">trama</div>
    <div class="sub-text">
      <div class="line"></div>
      <span>jornadas de design</span>
    </div>
    <div class="info-text">15 maio 2026 · online · entrada livre</div>
    <div class="threads-bar">
      <div style="background:#ff3c00"></div>
      <div style="background:#00e5ff"></div>
      <div style="background:#c8ff00"></div>
      <div style="background:#ff00aa"></div>
      <div style="background:#ff8800"></div>
      <div style="background:#7b61ff"></div>
    </div>
    <div class="credit">sistema de identidade visual · v02 · rodrigobrazao.pt</div>
  </div>
</div>

<div class="nav-arrow nav-arrow-left disabled" id="arrow-left" title="Slide anterior (←)">←</div>
<div class="nav-arrow nav-arrow-right" id="arrow-right" title="Próximo slide (→)">→</div>
<div id="progress-bar"><div id="progress-fill"></div></div>
<div id="slide-counter"></div>
<div id="controls-hint"></div>

<div id="controls-bar">
  <button id="btn-prev" title="Slide anterior (←)">←</button>
  <button id="btn-play" title="Play / Pause (P)">▶ play</button>
  <button id="btn-next" title="Próximo slide (→)">→</button>
  <div class="separator"></div>
  <div class="counter" id="bar-counter">1 / 30</div>
  <div class="separator"></div>
  <button id="btn-fullscreen" title="Fullscreen (F)">⛶ fullscreen</button>
</div>

<script>
// ═══════════════════════════════════════════
// TRAMA — Slideshow Presentation
// ═══════════════════════════════════════════

// ─── Thread colors ───
const THREADS = ['#ff3c00', '#00e5ff', '#c8ff00', '#ff00aa', '#ff8800', '#7b61ff'];
const BG = '#070709';

// ─── Screenshot files (ordered) ───
const screenshots = [
  'Screenshot 2026-02-12 at 15.01.37.png', // Hero/Logo
  'Screenshot 2026-02-12 at 15.01.44.png', // 01 Identidade
  'Screenshot 2026-02-12 at 15.01.52.png', // 02 Construtor
  'Screenshot 2026-02-12 at 15.02.05.png', // 04 Design System - Paleta
  'Screenshot 2026-02-12 at 15.02.19.png', // Tipografia Roboto Mono
  'Screenshot 2026-02-12 at 15.02.25.png', // Tipografia Instrument Serif
  'Screenshot 2026-02-12 at 15.02.29.png', // Variações Generativas
  'Screenshot 2026-02-12 at 15.02.34.png', // 05 Sistema de Ícones
  'Screenshot 2026-02-12 at 15.02.39.png', // 06 Convidados
  'Screenshot 2026-02-12 at 15.02.43.png', // Programa
  'Screenshot 2026-02-12 at 15.02.49.png', // Base Ana Moreira 16:9
  'Screenshot 2026-02-12 at 15.02.54.png', // Base Tomás Henriques 16:9
  'Screenshot 2026-02-12 at 15.03.01.png', // Base Beatriz Costa 16:9
  'Screenshot 2026-02-12 at 15.03.10.png', // Bases 9:16 Ana Moreira
  'Screenshot 2026-02-12 at 15.03.19.png', // Bases 9:16 Tomás Henriques
  'Screenshot 2026-02-12 at 15.03.32.png', // Bases 9:16 Beatriz Costa
  'Screenshot 2026-02-12 at 15.03.47.png', // Painel Vertical Programa
  'Screenshot 2026-02-12 at 15.03.57.png', // Painel Horizontal Programa
  'Screenshot 2026-02-12 at 15.04.04.png', // Versão Instagram Programa
  'Screenshot 2026-02-12 at 15.04.12.png', // Banner Facebook Programa
  'Screenshot 2026-02-12 at 15.04.19.png', // 09 Painéis Digitais
  'Screenshot 2026-02-12 at 15.04.25.png', // 10 Redes Sociais
  'Screenshot 2026-02-12 at 15.04.30.png', // 11 QR Codes
  'Screenshot 2026-02-12 at 15.04.37.png', // 12 Microsoft Teams - Keynotes
  'Screenshot 2026-02-12 at 15.04.44.png', // Teams - Workshops
  'Screenshot 2026-02-12 at 15.04.49.png', // Teams - Debate
  'Screenshot 2026-02-12 at 15.04.56.png', // Teams - Pausa
  'Screenshot 2026-02-12 at 15.05.07.png', // Teams - Countdown
];

// Duration per slide in seconds
const DURATIONS = {
  intro: 5,
  screenshot: 4,    // default for most
  hero: 5,          // first screenshot (hero)
  identidade: 5,
  construtor: 5,
  paleta: 5,
  typo1: 4,
  typo2: 4,
  variacoes: 4,
  icones: 5,
  convidados: 5,
  programa: 5,
  base16_9: 3,      // speaker bases 16:9
  base9_16: 3,      // speaker bases 9:16
  painelProg: 3,    // program panels
  paineis: 4,
  social: 5,
  qr: 5,
  teams: 3,         // teams separators
  countdown: 4,
  outro: 5,
};

// Per-slide duration map (index → seconds)
const slideDurations = [
  DURATIONS.intro,       // 0: intro
  DURATIONS.hero,        // 1: hero
  DURATIONS.identidade,  // 2: identidade
  DURATIONS.construtor,  // 3: construtor
  DURATIONS.paleta,      // 4: paleta
  DURATIONS.typo1,       // 5: roboto mono
  DURATIONS.typo2,       // 6: instrument serif
  DURATIONS.variacoes,   // 7: variações
  DURATIONS.icones,      // 8: ícones
  DURATIONS.convidados,  // 9: convidados
  DURATIONS.programa,    // 10: programa
  DURATIONS.base16_9,    // 11: base ana 16:9
  DURATIONS.base16_9,    // 12: base tomás 16:9
  DURATIONS.base16_9,    // 13: base beatriz 16:9
  DURATIONS.base9_16,    // 14: base ana 9:16
  DURATIONS.base9_16,    // 15: base tomás 9:16
  DURATIONS.base9_16,    // 16: base beatriz 9:16
  DURATIONS.painelProg,  // 17: painel vertical
  DURATIONS.painelProg,  // 18: painel horizontal
  DURATIONS.painelProg,  // 19: versão instagram
  DURATIONS.painelProg,  // 20: banner facebook
  DURATIONS.paineis,     // 21: painéis digitais
  DURATIONS.social,      // 22: redes sociais
  DURATIONS.qr,          // 23: qr codes
  DURATIONS.teams,       // 24: teams keynotes
  DURATIONS.teams,       // 25: teams workshops
  DURATIONS.teams,       // 26: teams debate
  DURATIONS.teams,       // 27: teams pausa
  DURATIONS.countdown,   // 28: teams countdown
  DURATIONS.outro,       // 29: outro
];

const totalSlides = screenshots.length + 2; // +intro +outro
const totalDuration = slideDurations.reduce((a, b) => a + b, 0);

// ─── Create image slide elements ───
const slideshow = document.getElementById('slideshow');
const outroSlide = document.getElementById('slide-outro');

screenshots.forEach((filename, i) => {
  const div = document.createElement('div');
  div.className = 'slide';
  div.id = `slide-${i + 1}`;
  const img = document.createElement('img');
  img.src = `correcoes_apresentacao/${filename}`;
  img.alt = `Slide ${i + 1}`;
  img.loading = i < 5 ? 'eager' : 'lazy';
  div.appendChild(img);
  slideshow.insertBefore(div, outroSlide);
});

// Update outro slide id
outroSlide.id = `slide-${totalSlides - 1}`;

// ─── State ───
let currentSlide = 0;
let isPlaying = false;
let autoTimer = null;

// ─── Animated weave canvas ───
const canvas = document.getElementById('weaveCanvas');
const ctx = canvas.getContext('2d');
let animFrame;
let time = 0;

function resizeCanvas() {
  const dpr = window.devicePixelRatio || 1;
  canvas.width = window.innerWidth * dpr;
  canvas.height = window.innerHeight * dpr;
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  ctx.scale(dpr, dpr);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Deterministic RNG
function rng(seed, index) {
  let h = seed * 2654435761 ^ index * 2246822519;
  h = ((h >> 16) ^ h) * 0x45d9f3b;
  h = ((h >> 16) ^ h) * 0x45d9f3b;
  h = (h >> 16) ^ h;
  return (h & 0x7fffffff) / 0x7fffffff;
}

// Thread data
const SEED = 42;
const hCount = 14, vCount = 14;
const hThreads = [], vThreads = [];

function initThreads() {
  hThreads.length = 0; vThreads.length = 0;
  const W = window.innerWidth, H = window.innerHeight;
  for (let i = 0; i < hCount; i++) {
    hThreads.push({
      baseY: (H * (i + 0.5)) / hCount,
      color: THREADS[Math.floor(rng(SEED, i + 300) * 6)],
      phase: rng(SEED, i + 500) * Math.PI * 2,
      amp: 5 + rng(SEED, i + 600) * 25,
      op: 0.2 + rng(SEED, i + 700) * 0.4,
      thick: 0.5 + rng(SEED, i + 200) * 1.5,
      spd: 0.08 + rng(SEED, i + 400) * 0.2,
    });
  }
  for (let i = 0; i < vCount; i++) {
    vThreads.push({
      baseX: (W * (i + 0.5)) / vCount,
      color: THREADS[Math.floor(rng(SEED, i + 900) * 6)],
      phase: rng(SEED, i + 1100) * Math.PI * 2,
      amp: 5 + rng(SEED, i + 1200) * 25,
      op: 0.15 + rng(SEED, i + 1300) * 0.35,
      thick: 0.5 + rng(SEED, i + 800) * 1.5,
      spd: 0.06 + rng(SEED, i + 1000) * 0.18,
    });
  }
}
initThreads();
window.addEventListener('resize', initThreads);

function drawWeave() {
  time += 0.016;
  const W = window.innerWidth, H = window.innerHeight;
  ctx.clearRect(0, 0, W, H);
  ctx.fillStyle = BG;
  ctx.fillRect(0, 0, W, H);

  // Only draw threads on intro/outro slides
  const isLogoSlide = currentSlide === 0 || currentSlide === totalSlides - 1;
  const threadOpacity = isLogoSlide ? 1 : 0;

  if (threadOpacity > 0) {
    // Horizontal threads
    hThreads.forEach(th => {
      ctx.beginPath();
      ctx.strokeStyle = th.color;
      ctx.globalAlpha = th.op * threadOpacity;
      ctx.lineWidth = th.thick;
      for (let x = 0; x < W; x += 3) {
        const y = th.baseY + Math.sin(x * 0.005 + time * th.spd + th.phase) * th.amp;
        x === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke();
    });

    // Vertical threads
    vThreads.forEach(th => {
      ctx.beginPath();
      ctx.strokeStyle = th.color;
      ctx.globalAlpha = th.op * 0.7 * threadOpacity;
      ctx.lineWidth = th.thick * 0.8;
      for (let y = 0; y < H; y += 3) {
        const x = th.baseX + Math.sin(y * 0.005 + time * th.spd * 0.8 + th.phase + 1) * th.amp * 0.8;
        y === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke();
    });
  }

  ctx.globalAlpha = 1;
  animFrame = requestAnimationFrame(drawWeave);
}
drawWeave();

// ─── Navigation ───
function goToSlide(index) {
  if (index < 0 || index >= totalSlides) return;

  // Deactivate current
  const cur = document.getElementById(`slide-${currentSlide}`);
  if (cur) cur.classList.remove('active');

  currentSlide = index;

  // Activate new
  const next = document.getElementById(`slide-${currentSlide}`);
  if (next) {
    next.classList.add('active');
    // Re-trigger animations for logo slides
    if (next.classList.contains('slide-logo')) {
      const children = next.querySelectorAll('.pre-text, .logo-text, .sub-text, .info-text, .threads-bar, .credit');
      children.forEach(el => {
        el.style.animation = 'none';
        el.offsetHeight; // trigger reflow
        el.style.animation = '';
      });
    }
  }

  // Show/hide canvas
  canvas.style.opacity = (currentSlide === 0 || currentSlide === totalSlides - 1) ? '1' : '0';

  updateUI();
}

function nextSlide() {
  if (currentSlide < totalSlides - 1) {
    goToSlide(currentSlide + 1);
  } else if (isPlaying) {
    stopAutoPlay();
  }
}

function prevSlide() {
  if (currentSlide > 0) goToSlide(currentSlide - 1);
}

function updateUI() {
  // Progress
  const fill = document.getElementById('progress-fill');
  fill.style.width = `${((currentSlide + 1) / totalSlides) * 100}%`;

  // Side arrows state
  const arrowL = document.getElementById('arrow-left');
  const arrowR = document.getElementById('arrow-right');
  arrowL.classList.toggle('disabled', currentSlide === 0);
  arrowR.classList.toggle('disabled', currentSlide === totalSlides - 1);

  // Controls bar counter
  const barCounter = document.getElementById('bar-counter');
  if (barCounter) barCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;

  // Controls bar prev/next
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  if (btnPrev) btnPrev.style.opacity = currentSlide === 0 ? '0.25' : '1';
  if (btnNext) btnNext.style.opacity = currentSlide === totalSlides - 1 ? '0.25' : '1';

  // Play button state
  updatePlayButton();
}

function updatePlayButton() {
  const btn = document.getElementById('btn-play');
  if (!btn) return;
  if (isPlaying) {
    btn.textContent = '⏸ pause';
    btn.classList.add('active');
  } else {
    btn.textContent = '▶ play';
    btn.classList.remove('active');
  }
}

// ─── Auto-play ───
function startAutoPlay() {
  isPlaying = true;
  goToSlide(0);
  scheduleNext();
  updatePlayButton();
}

function scheduleNext() {
  if (!isPlaying) return;
  clearTimeout(autoTimer);
  const duration = slideDurations[currentSlide] || 4;
  autoTimer = setTimeout(() => {
    if (currentSlide < totalSlides - 1) {
      nextSlide();
      scheduleNext();
    } else {
      stopAutoPlay();
    }
  }, duration * 1000);
}

function stopAutoPlay() {
  isPlaying = false;
  clearTimeout(autoTimer);
  updatePlayButton();
}

function resumeAutoPlay() {
  isPlaying = true;
  scheduleNext();
  updatePlayButton();
}

function toggleAutoPlay() {
  if (isPlaying) {
    stopAutoPlay();
  } else {
    resumeAutoPlay();
  }
}

// ─── Keyboard controls ───
document.addEventListener('keydown', (e) => {
  switch (e.key) {
    case 'ArrowRight':
    case ' ':
      e.preventDefault();
      if (isPlaying) { stopAutoPlay(); }
      nextSlide();
      break;
    case 'ArrowLeft':
      e.preventDefault();
      if (isPlaying) { stopAutoPlay(); }
      prevSlide();
      break;
    case 'f':
    case 'F':
      e.preventDefault();
      toggleFullscreen();
      break;
    case 'p':
    case 'P':
      e.preventDefault();
      toggleAutoPlay();
      break;
    case 'Home':
      e.preventDefault();
      goToSlide(0);
      break;
    case 'End':
      e.preventDefault();
      goToSlide(totalSlides - 1);
      break;
    case 'Escape':
      if (document.fullscreenElement) {
        document.exitFullscreen();
      }
      break;
  }
});

// Arrow click handlers (side arrows)
document.getElementById('arrow-left').addEventListener('click', (e) => {
  e.stopPropagation();
  if (isPlaying) stopAutoPlay();
  prevSlide();
});
document.getElementById('arrow-right').addEventListener('click', (e) => {
  e.stopPropagation();
  if (isPlaying) stopAutoPlay();
  nextSlide();
});

// Controls bar button handlers
document.getElementById('btn-prev').addEventListener('click', (e) => {
  e.stopPropagation();
  if (isPlaying) stopAutoPlay();
  prevSlide();
});
document.getElementById('btn-next').addEventListener('click', (e) => {
  e.stopPropagation();
  if (isPlaying) stopAutoPlay();
  nextSlide();
});
document.getElementById('btn-play').addEventListener('click', (e) => {
  e.stopPropagation();
  toggleAutoPlay();
});
document.getElementById('btn-fullscreen').addEventListener('click', (e) => {
  e.stopPropagation();
  toggleFullscreen();
});

// Update fullscreen button text on change
document.addEventListener('fullscreenchange', () => {
  const btn = document.getElementById('btn-fullscreen');
  if (btn) {
    btn.textContent = document.fullscreenElement ? '✕ sair' : '⛶ fullscreen';
  }
});

// Prevent controls bar clicks from reaching slideshow
document.getElementById('controls-bar').addEventListener('click', (e) => {
  e.stopPropagation();
});

// Click to advance
document.getElementById('slideshow').addEventListener('click', (e) => {
  const x = e.clientX;
  const w = window.innerWidth;
  if (x > w * 0.3) {
    nextSlide();
  } else {
    prevSlide();
  }
  if (isPlaying) { stopAutoPlay(); }
});

// ─── Fullscreen ───
function toggleFullscreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(() => {});
  } else {
    document.exitFullscreen();
  }
}

// ─── Init ───
canvas.style.transition = 'none';
updateUI();

// Auto-start presentation after 1 second
setTimeout(() => {
  startAutoPlay();
}, 1000);

console.log(`trama — Apresentação Slideshow`);
console.log(`Total slides: ${totalSlides}`);
console.log(`Duração total: ~${totalDuration}s (${Math.floor(totalDuration/60)}m ${totalDuration%60}s)`);
console.log(`Controlos: Espaço/→ avançar · ← recuar · F fullscreen · P play/pause`);
</script>
</body>
</html>
